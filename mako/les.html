<%inherit file="mako/base.html"/>
  <%block name='favicon'>
  <link rel="icon" type="image/png" href="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBggGBQkIBwgKCQkKDRYODQwMDRoTFBAWHxwhIB8cHh4jJzIqIyUvJR4eKzssLzM1ODg4ISo9QTw2QTI3ODUBCQoKDgwOGQ0MFCwcFBosLCksKSw1NSspLCwsNSksLCkpLCwsLCwsKSksKSksKSwpKSkpKSkpKSkpKSkpLCwpKf/AABEIACAAIAMBIgACEQEDEQH/xAAZAAEAAwEBAAAAAAAAAAAAAAAEAQMFBwD/xAAsEAACAQIDBgUFAQAAAAAAAAABAgMEEQAFEhQhIjFBYQYVM1FSEzJTgcEH/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A6b4uzqTKFSQJLLEoGqKKT6bOSd3FYmwseXvgkmcFGcGKUBWRb+YS2bUQN3D0viPHpYRgoSCEBuBfdZ74TmT1mzLc5j60X3bN+RfbGgH505tdJkJZwAcwkvw9ft69MehzqeKQTJLJaNoi8ZnaVWV2KkHUoIItfFtVtj1tNfzC/Fa+z35YDXRTKakzCe42b1tF/Ub4bsCI/wBBYgRgAm6dCB0fBpqmKWBdWwerHyrD817Y1PGeWtVvDIyymDQVZ4lLFT0uBvsbnf2wFK9GQLJU1IAZW3UT81II6e4wpcxp2rqVY46GVjqASOtZixt2XFVeJBO9LsQglqngRFSbXfS7MxP6IxNXmEtVmlBNSGqq5IGc/T2ZoxxIV5kd8bmTZLJTzNXZgwkrHFgBvWIew/pwJ//Z"/>
  </%block>
  <%block name='extracss'>
  body {
  padding-top: 60px;
  padding-bottom: 40px;
  }
  .sidebar-nav { padding: 9px 0; }

  ${ full_css }
  div.dataTables_scroll { clear: both; }
  .modal.large{
    width: 850px;
    margin-left: -425px; /* - width/2 */
  }
  .sidescroll { overflow-x: auto;}
  .vertical_scroll { overflow-y: auto;}
  .clickable { cursor:pointer;}
  span.clickable:hover,
  p.clickable:hover {
    text-decoration: underline;
  }
  .section-header {
    padding-bottom : 5px;
    margin-bottom : 10px;
    border-bottom: 1px solid #EEE;
    width: 100%
  }
  .bottom-border {
    border-bottom: 1px solid #EEE;
  }
  .section-footer {
    border-top: 1px solid #EEE;
    width: 100%;

  }

  th.sorting_asc,
  th.sorting_desc {
    background-color:#D9EDF7;
   }
  div.int{width: 90px;text-align:center;}
  div.big-int{width: 90px;text-align:right;}
  div.str{width: 150px;}
  div.wide-str{width: 300px;}
  div.percentage{width: 90px;text-align:center;}
  div.date{width: 90px;}
  
  div.dept_menu {
    z-index: 5000;
    position: absolute;
    top: 0px;
  }
  table caption {font-size: 1.1em;}
  table thead tr th div.big-int{text-align: center;}
  table{ font-size: 0.9em;}

  .print_view alert{ font-size: 3em;}
  .print_view th,.print_view td {
    line-height :13px;
    padding :0px;
  } 
  .print_view table caption{ font-size: 1.2em;}
  .print_view table { font-size: 0.7em;}
  .print_view th {width: 60px}
  .print_view div.int{width: 60px;}
  .print_view div.big-int{width: 60px;}
  .print_view div.str{width: 100px;}
  .print_view div.wide-str{width: 220px;}
  .print_view div.percentage{width: 60px;}
  .print_view div.date{width: 60px;}

  </%block>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid" id='navbar'>
        <span class="brand" id='title'></span>
        <div class='nav_bar_ul'>

        </div>
        <ul class='nav pull-right'>
          <li><a href="#" id="lang_change"></a> </li>
        </ul>
      </div>
    </div>
  </div>
  <div id='app'>
  </div>

  <div class="modal hide large" id="modal_skeleton" tabindex="-1" role='dialog'>
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
      <h3></h3>
    </div>
    <div class="modal-body">
      <p></p>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn close" data-dismiss="modal"></a>
    </div>
  </div>
<%text filter="n">
<script type='text/plain' id='ver_navbar_t'>
<ul class='nav'>
  <li> <a href='#' class='home'>{{{gt "home"}}}</a> </li>
  <li> <a href='#' class='dept_sel'> {{gt "select"}}</a> </li>
  <li>
    <form class="navbar-search pull-left">
      <input type="text" class='search-query span2 dept_search' />
    </form>
  </li>
</ul>
</script>
<script type='text/plain' id='hori_navbar_t'>
<ul class='nav'>
  <li> <a href='#' class='home'>{{gt "home" }}</a> </li>
</ul>
</script>
<script type='text/plain' id='home_t'>
<div>
  <div class='container home'>
    <div class='row'>
      <div class='well span4 offset3'>
        {{{gt "welcome" }}}
      </div>
    </div>
  </div>
</div>
</script>

<script type='text/plain' id='main_t'>
<div class='container'>
  <ul class="nav nav-pills">
    <li style='display: none;' class='back active'>
      <a href='#' ></a>
    </li>
    <li class="active">
    <a href="#" class='dept_name'>{{lang org.dept}}</a> 
    </li>
    <li class='dropdown active'>
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">
        <span class="caret" ></span>
      </a>
      <ul class="dropdown-menu" id='other_depts_list'>
        <li class="nav-header"> {{gt "other_in_min"}} </li>
      </ul>
    </li>
  </ul>
  <div class='panels'>

  </div>
</div>
<div class='table_content'>

</div>
</script>
<script type='text/plain' id='panels_t'>
  <p class='lead'> {{gt 'current_year_fisc'}} </p>
  <div class="row widget-row" >
      <div class="span4" id='Table1'>
      </div>                       
      <div class="span4" id='Table2'>
      </div>                       
      <div class="span4" id='Table2a'>
      </div>                       
  </div>                           
  <p></p>                          
  <div class="row widget-row" >    
      <div class="span4" id='Table2b'>
      </div>                       
      <div class="span4" id='Table3'>
      </div>
      <div class="span4" id='TableIS'>
      </div>
  </div>
  <p></p>
  <p class='lead'> {{gt 'previous_year_fisc'}} </p>
  <div class='row widget-row'>
      <div class="span4" id='Table4'>
      </div>                       
      <div class="span4" id='Table5'>
      </div>                       
      <div class="span4" id='Table6'>
      </div>                       
  </div>                           
  <p></p>                          
  <div class="row widget-row" >    
      <div class="span4" id='Table7'>
      </div>
  </div>
</script>
<script type='text/plain' id='mini_t'>
  <div class='mini_t well well-small'>
    <div class='section-header'>
      <strong><span class='title '></span></strong>
    </div>
    <div class='mini_payload' style='font-size: 12px'>

    </div>
    <div class='details_button section-footer'>
      <a class='btn btn-link btn-small details pull-right'> {{gt 'details'}} </a>
    </div>
  </div>
</script>
<script type='text/plain' id='nav_li'>
  <li><a>{{ text}}</a></li>
</script>

<script type='text/plain' id='print_view_t'>
  <div class='print_view'>
    <div class="alert fade in" style='width: 25%;'>
      <button type="button" class="close" data-dismiss="alert">&#215;</button>
      {{gt "print_help"}}
    </div>
    <div class='btn-group'> 
      <button class='btn btn-primary print_view_print'>
      {{gt "print"}}
      </button>
      <button class='btn btn-danger print_view_close'>
      {{gt "close"}}
      </button>
    </div>
    <div class='table_area'>
    </div>
  </div>
</script>
<script type='text/plain' id='dataview_t'>
  <div>
    <ul class="nav nav-tabs">
      <li><a href="#{{key}}_tables" data-toggle="tab"> {{gt "table"}} </a></li>
      <li><a href="#{{key}}_graphs" data-toggle="tab"> {{gt "graphs"}} </a></li>
    </ul>
    <div class='tab-content'>
      <div class='tab-pane active tables' id='{{key}}_tables'>
          <ul class='nav nav-pills'>
            <li>
              <a href='#' class='details'
                title='{{gt "details_help"}}' 
                data-placement='top'>
                {{gt "details" }}
              </a>
            </li>
            <li>
              <a href='#' class='copy'
                title='{{gt "copy_tooltip"}}' 
                 data-placement='top'>
                {{gt "copy" }}
              </a>
            </li>
            <li>
              <a href='#' class='about'>
                {{gt "about"}}
              </a>
            </li>
            <li>
              <a href='#' class='print'>
                {{gt "print"}}
              </a>
            </li>
            {{#if footnotes}}
            <li>
              <a class='fn' href='#'>
                {{gt "footnotes"}}
              </a>
            </li>
            {{/if}}
            <li class="{{#if min_tot}}active{{/if}}">
              <a class="min_tot" href='#'>
                {{gt "min_total"}}
              </a>
            </li>
            <li class="{{#if goc_tot}}active{{/if}}">
              <a class="goc_tot " href='#'>
                {{gt "goc_total"}}
              </a>
            </li>
          </ul>
        <div class='well table_payload sidescroll'>

        </div>
      </div>
      <div class='tab-pane graph_content' id='{{key}}_graphs'>
        <div class='graph_payload'>

        </div>
      </div>
    </div>

  </div>
</script>
<script type='text/plain' id='footnotes_t'>
    <div class='footnotes well well-small'>
      <table class="table-condensed">
        <tbody>
        {{#each fns}}
          <tr>
            <td> {{this.symbol}} </td>
            <td>{{lang this.note }} </td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    </div>
</script>

<script type='text/plain' id='graph_grid_t'>
  <div class='container-fluid'>
    <div class="row-fluid">
      {{#if sidebar_header}}
        <div class='span2 well'>
          <ul class="nav nav-list">
            <li class="nav-header"> {{sidebar_header}} </li>
            {{#items}}
            <li><a href="#">{{.}}</a></li>
            {{/items}}
          </ul>
        </div>
      {{/if}}
      {{#rows}}
        <div class='span10 bottom-border'>
          {{#cols}}
            <div class='span{{span}}'>
              <div  class='well'> 
                <div style='height:{{height}}px;'  id="{{id}}" ></div>
              </div>
              <div id="{{id}}_fn"></div>
            </div>
          {{/cols}}
        </div>
      {{/rows}}
    </div>
    <p></p>
  </div>
</script>

<script type='text/plain' id='org_list_t'>
<div class='well dept_menu'>
  <div class='container-fluid'>
    <div class="row-fluid">
      {{#each cols}}
        <div class='span2'>
        {{#each this}} {{! this = array of ministries }}
        <ul class="nav nav-list unstyled" >
          <li class='nav-header'> {{lang this.0.min}} </li>
          {{#each this }} {{! this = ministry }}
            {{#is_dept this}} {{! this = dept }}
               <li><strong><a href='#'>{{dept}}</a></strong></li>
            {{else}}
            <li><a href='#'>{{dept}}</a></li>
            {{/is_dept}}
          {{/each}}
        </ul>
        {{/each}}
        </div>
      {{/each}}
    </div>
  </div>
</div>
</script>
<script type='text/plain' id='list_t'>
  <table class='table table-striped table-condensed'>
    {{#title}} <caption>{{.}}</caption> {{/title}}
    <thead></thead>
    <tbody></tbody>
    <tfoot></tfoot>
  </table>
</script>

<script type='text/plain' id='analytics_t'>
  <div>
     <div class="btn-toolbar" style='padding-left: 50px'>
        <div class='btn-group'> 
          <button class='btn btn-inverse copy'
            title='{{gt "copy_tooltip"}}' 
            data-placement='top'>
            {{gt "copy"}}
          </button>
        </div> 
        <div class="btn-group" data-toggle="buttons-radio">
          <button type="button" class="btn btn-primary active">
            {{gt "summary_stats"}}
          </button>
          <button type="button" class="btn btn-primary">
            {{gt "ministry_stats"}}
          </button>
          <button type="button" class="btn btn-primary">
            {{gt "government_stats"}}
          </button>
        </div>
      </div>
      <div class='table_div vertical_scroll' 
         style='height: 340px'>

      </div>
  </div>
</script>
<script type='text/plain' id='stat_tr'>
  <tr class='{{#active_dept}}info{{/active_dept}}'>
    <td>
      {{ index }}
    </td>
    <td>
      <a href='#'>{{dept_name}} </a> 
    </td>
    <td>
      {{ col }}
    </td>
    </tr>
</script>
<script type='text/plain' id='dept_info_t'>
  <p>{{lang dept.dept}} in the 
  <a href="http://www.google.com/search?tbm=nws&q={{encodeURI dept.dept}}" target="_blank">
    news.
  </a>
  </p>
  <form class='form-inline'>
    <label> 
      <a href="http://{{{lang dept.website}}}" target="_blank">
        {{gt  "website"}}
      </a>
    </label>
    <input type='text' class='input-xlarge site-search'
    placeholder='{{gt "search_site"}}'></input>  
    <a href='#' class='btn btn-primary btn-small site-search'>
      {{gt "search_go"}}
      </a>
  </form>
  <p> 
  <a href='{{{gt "IGOC_site"}}}' target='_new'>
    {{gt "org_info"}}
    </a>
  </p>
 <table class='table table-striped table-condensed'>
   <tbody>
     <tr>
       <th> {{gt "legal_name"}} </th>
       <td> {{lang dept.legal_name }}  </td>
     </tr>
     <tr>
       <th> {{gt "applied_title" }} </th>
       <td> {{lang dept.applied_title}}  </td>
     </tr>
     <tr>
       <th> {{gt "minister" }} </th>
       <td> {{lang dept.minister}}  </td>
     </tr>
     <tr>
       <th> {{gt "org_head" }} </th>
       <td> {{lang dept.org_head}}  </td>
     </tr>
     <tr>
       <th> {{gt "mandate"}} </th>
       <td> {{{lang dept.mandate}}}  </td>
     </tr>
     <tr>
       <th> {{gt "legislation"}} </th>
       <td>
         {{#dept.legislation}}
         <a href='http://google.com/search?q={{encodeURI .}}' target="_blank">
           {{{lang .}}}
         </a>
         {{/dept.legislation}}
       </td>
     </tr>
   </tbody>
 </table>
</script>
<script type='text/plain' id='header_t'>
  <th colspan='{{colspan}}'><div class='{{class_}}'> {{header}} </div></th>
</script>
</%text>
<%include file='help_text.html'/>
<%block name='extrajs'>
    ${ full_js }
    $(function(){
      var APP = ns('APP');

      APP.dispatcher.once("app_ready", function(app){

        Handlebars.registerHelper("gt",function(context){
          return app.get_text(context);
        });
        Handlebars.registerHelper("uri",function(context){
          return encodeURI(context[app.state.get("lang")]);
        });
        Handlebars.registerHelper("lang",function(context){
          return context[app.state.get("lang")];
        });
        Handlebars.registerHelper("encodeURI",function(context,options){
          if (_.has(context,'en') && _.has(context,"fr")){
            context = context[app.state.get("lang")];
          }
          return encodeURI(context);
        });
        Handlebars.registerHelper("is_dept",function(context,options){
          var dept = context['dept'][app.state.get("lang")];
          if (_.has(context,'org_type') && context['org_type']['en'] === 'Departments') {
            return options.fn({dept:dept});
          }else{
            return options.inverse({dept:dept});
          }
        });


        app.state.set("lang","en");
      });

      _.each(depts,function(org){
        org['mapped_data'] = {};
        org['mapped_objs'] = {};
      });

      APP.app = new APP.appView();

    });
</%block>


